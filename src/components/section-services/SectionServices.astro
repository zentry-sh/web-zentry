---
const servicios = [
  {
    categoria: "Desarrollo de Software y Aplicaciones",
    items: [
      "Desarrollo de aplicaciones web (sitios, e-commerce, sistemas de gestión).",
      "Desarrollo de aplicaciones móviles (Android, iOS, multiplataforma).",
      "Desarrollo de software a la medida.",
      "Integración de sistemas (ERP, CRM, pasarelas de pago, APIs).",
      "Modernización y migración de aplicaciones heredadas.",
    ],
  },
  {
    categoria: "Consultoría Tecnológica",
    items: [
      "Análisis y planeación estratégica de TI.",
      "Transformación digital de empresas.",
      "Consultoría en big data y analítica.",
      "Gobernanza y cumplimiento normativo (ISO, GDPR, etc.).",
      "Roadmaps tecnológicos para negocios.",
    ],
  },
  {
    categoria: "Marketing y Experiencia Digital",
    items: [
      "Diseño y desarrollo de páginas web corporativas.",
      "Posicionamiento SEO y SEM.",
      "Marketing en redes sociales.",
      "Analítica web.",
      "Experiencia de usuario (UX/UI).",
    ],
  },
  {
    categoria: "Inteligencia de Negocios y Datos",
    items: [
      "Implementación de BI (Business Intelligence).",
      "Big Data (Hadoop, Spark, etc.).",
      "Machine Learning e Inteligencia Artificial.",
      "Análisis predictivo.",
      "Dashboards e informes interactivos.",
    ],
  },
  {
    categoria: "Servicios en la Nube (Cloud)",
    items: [
      "Migración a la nube (AWS, Azure, Google Cloud).",
      "Implementación de servidores virtuales y contenedores (Docker, Kubernetes).",
      "Soluciones SaaS, PaaS, IaaS.",
      "Backup y recuperación en la nube.",
      "Optimización de costos en la nube.",
    ],
  },
  {
    categoria: "Ciberseguridad",
    items: [
      "Auditorías de seguridad y pruebas de penetración.",
      "Implementación de firewalls y sistemas de detección de intrusos.",
      "Gestión de identidades y accesos.",
      "Seguridad en aplicaciones y en la nube.",
      "Capacitación en ciberseguridad para empleados.",
    ],
  },
];
---

<section>
  <h2>Nuestros Servicios</h2>
  <div class="grid">
    {
      servicios.map((servicio) => (
        <div class="servicio-card">
          <h3>{servicio.categoria}</h3>
          <ul>
            {servicio.items.map((item) => (
              <li>{item}</li>
            ))}
          </ul>
        </div>
      ))
    }
  </div>

  <div class="contacto-btn-container">
    <a href="https://wa.me/524425265981" class="contacto-btn" id="contacto-btn">
      <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24">
        <path
          d="M20.52 3.48A11.93 11.93 0 0 0 12 0C5.37 0 0 5.37 0 12c0 2.11.55 4.17 1.6 6.01L0 24l6.18-1.62A11.93 11.93 0 0 0 12 24c6.63 0 12-5.37 12-12 0-3.19-1.24-6.19-3.48-8.52zM12 22c-1.85 0-3.67-.5-5.23-1.45l-.37-.22-3.67.96.98-3.58-.24-.37A9.93 9.93 0 0 1 2 12c0-5.52 4.48-10 10-10s10 4.48 10 10-4.48 10-10 10zm5.2-7.8c-.28-.14-1.65-.81-1.9-.9-.25-.09-.43-.14-.61.14-.18.28-.7.9-.86 1.08-.16.18-.32.2-.6.07-.28-.14-1.18-.44-2.25-1.41-.83-.74-1.39-1.65-1.55-1.93-.16-.28-.02-.43.12-.57.13-.13.28-.34.42-.51.14-.17.18-.29.28-.48.09-.19.05-.36-.02-.5-.07-.14-.61-1.47-.84-2.01-.22-.53-.45-.46-.61-.47-.16-.01-.35-.01-.54-.01-.19 0-.5.07-.76.34-.26.27-1 1-.98 2.43.02 1.43 1.03 2.81 1.18 3.01.15.2 2.03 3.1 4.93 4.22.69.3 1.23.48 1.65.61.69.22 1.32.19 1.82.12.56-.08 1.65-.67 1.89-1.32.23-.65.23-1.21.16-1.32-.07-.11-.25-.18-.53-.32z"
        ></path>
      </svg>
      ¡Contáctanos por WhatsApp!
    </a>
  </div>
</section>

---

<script>
  // 👇 esto corre solo en cliente
  if (typeof window !== "undefined") {
    const initContactButton = () => {
      const btn = document.getElementById("contacto-btn");
      if (btn) {
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                btn.classList.add("animate-bounce-on-view");
              } else {
                btn.classList.remove("animate-bounce-on-view");
              }
            });
          },
          { threshold: 0.5 }
        );
        observer.observe(btn);
      }
    };

    if (document.readyState === "complete") {
      initContactButton();
    } else {
      window.addEventListener("load", initContactButton);
    }
    document.addEventListener("astro:page-load", initContactButton);
  }
</script>

<style>
  .contacto-btn-container {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 2.5rem;
  }
  .contacto-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1.1rem;
    background-color: #22c55e;
    color: #fff;
    font-weight: 700;
    font-size: 1rem;
    border-radius: 0.6rem;
    box-shadow: 0 6px 12px -3px rgba(0, 0, 0, 0.22);
    transition: all 0.3s ease;
  }

  .contacto-btn:hover {
    background-color: #16a34a;
  }

  .contacto-btn:focus {
    outline: none;
    box-shadow: 0 0 0 4px rgba(74, 222, 128, 0.5);
  }

  .animate-bounce-on-view {
    animation: bounceOnView 1s infinite;
  }

  @keyframes bounceOnView {
    0%,
    100% {
      transform: translateY(0);
      animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
    }
    50% {
      transform: translateY(-10px);
      animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
    }
  }

  .contacto-btn svg {
    width: clamp(1.2rem, 4vw, 1.75rem);
    height: clamp(1.2rem, 4vw, 1.75rem);
  }

  section {
    padding: 4rem 2rem;
    max-width: 1200px;
    margin: auto;
  }
  h2 {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 2rem;
    text-align: center;
    color: #1f2937;
  }
  .grid {
    display: grid;
    gap: 1.5rem;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    align-items: stretch;
  }
  .servicio-card {
    background: #101720;
    border-radius: 1rem;
    padding: 1.5rem;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.18);
    transition: transform 0.3s ease;
  }
  .servicio-card:hover {
    transform: translateY(-5px);
  }
  .servicio-card h3 {
    font-size: 1.25rem;
    margin-bottom: 1rem;
    color: #2563eb;
  }
  .servicio-card ul {
    list-style: disc;
    padding-left: 1.2rem;
    color: #fff;
  }
  .servicio-card li {
    margin-bottom: 0.5rem;
  }
</style>
